<%- include('../layouts/head'); %>
<%- include('../layouts/sidebar'); %>

<div id="page-wrapper">
	<div class="container-fluid">
		<div class="row">
			<div class="col-lg-12">
				<h2 class="page-header"><%=titulo%></h2>

				<%if(locals.creado == 1){%>
					<%-include('../layouts/alert', {"status": "success", "mensaje": "Empleado creado correctamente"});%>
				<%}else if(locals.creado == 0){%>
					<%-include('../layouts/alert', {"status": "danger", "mensaje": "Error al crear Empleado"});%>
				<%}else if(locals.editado == 1){%>
					<%-include('../layouts/alert', {"status": "success", "mensaje": "Empleado editado correctamente"});%>
				<%}else if(locals.editado == 0){%>
					<%-include('../layouts/alert', {"status": "danger", "mensaje": "Error al editar Empleado"});%>
				<%}else if(locals.eliminado == 1){%>
					<%-include('../layouts/alert', {"status": "success", "mensaje": "Empleado eliminado correctamente"});%>
				<%}else if(locals.eliminado == 0){%>
					<%-include('../layouts/alert', {"status": "danger", "mensaje": "Error al eliminar farmacia"});%>
				<%}%>

				<div class="text-right">
					<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter"><i class="fa fa-plus"></i></button>
				</div>
			</div>
			<!-- /.col-lg-12 -->
		</div>
		<!-- /.row -->
		<div class="row">
			<div class="col-lg-12">
				<div class="panel panel-default">
					<!-- /.panel-heading -->
					<div class="panel-body">
						<div class="table-responsive">
							<table class="table table-striped table-bordered table-hover" id="dataTables-example">
								<thead class="text-center">
									<tr>
										<th>ID</th>
										<th>Nombre</th>
										<th>Apellido</th>
										<th>Cargo</th>
										<th>Accion</th>
									</tr>
								</thead>

								<tbody class="text-center">
									<% locals.empleados.forEach((e) => { %>
									<tr>
										<td><%=e.id%></td>
										<td><%=e.nombre%></td>
										<td><%=e.apellido%></td>
										<td><%=e.cargo.descripcion%></td>
										<td >
											<a href="/empleado/edit/<%=e.id%>" class="btn btn-warning"><i class="fa fa-edit"></i></a>
											<a href="/empleado/show/<%=e.id%>" class="btn btn-success"><i class="fa fa-user"></i></a>
											<button type="submit" form="theForm" class="btn btn-danger"><i class="fa fa-trash"></i></button>
											<form id="theForm" action="/empleado/delete/<%=e.id%>" method="POST"></form>
										</td>
									</tr>
									<%});%>

								</tbody>
							</table>
						</div>
					</div>
					<!-- /.panel-body -->
				</div>
				<!-- /.panel -->
			</div>
			<!-- /.col-lg-12 -->
		</div>
	</div>
	<!-- /.container-fluid -->
</div>
<!-- /#page-wrapper -->

<%- include('./modal'); %>
<%- include('../layouts/scripts'); %>
<%- include('../layouts/datatable'); %>
<%- include('../empleado/validation'); %>

<%if(locals.edit || locals.show){%>
	<script type="text/javascript">
		$("#exampleModalCenter").modal('show');
	</script>
<%}%>

<%- include('../layouts/foot'); %>